{"ast":null,"code":"import _slicedToArray from\"/Users/yousefgadban/Documents/bootcamp/bank/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import\"./login.css\";import{useHistory}from'react-router-dom';import{GetAllUsers,LoginUser}from'../api/api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var updateHeader=_ref.updateHeader;var history=useHistory();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),userId=_useState2[0],setUserId=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),userEmail=_useState4[0],setUserEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),allUsers=_useState8[0],setAllUsers=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),userLoggedInSuccessfully=_useState10[0],setUserLoggedInSuccessfully=_useState10[1];var currentUser={createdAt:\"2021-10-26T13:00:30.538Z\",name:\"Kyle Gleason\",avatar:\"https://cdn.fakercloud.com/avatars/mirfanqureshi_128.jpg\",userName:\"kyle\",password:\"kyle\",accountNumber:74732,id:\"1\"};var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),user=_useState12[0],setUser=_useState12[1];useEffect(function(){// get user data from db\nconsole.log('did mount ',userLoggedInSuccessfully);if(userLoggedInSuccessfully){history.push(\"/account/\".concat(userId,\"/\",'123'));}else{GetAllUsers().then(function(response){var allUsers=response.data;console.log(allUsers);setAllUsers(allUsers);});}},[]);var onLoginClick=function onLoginClick(){console.log('onLoginClick ',userEmail,password);if(!validateEmail(userEmail)||password.trim().length<6){console.log('Invalid input');}else{console.log('start loginn');LoginUser(userEmail,password).then(function(response){var actionResponse=response.data;console.log(actionResponse);if(actionResponse.result==='success'){setUserLoggedInSuccessfully(true);setUserId(actionResponse.data._id);history.push(\"/account/\".concat(actionResponse.data._id,\"/\",'123'));if(actionResponse.data.role==='manager'){updateHeader(2);}else{updateHeader(1);}}else{console.log('Incorrect Username or Password');}// if (response.status === 201) {\n//     updateHeader(1)\n//     history.push(`/account/${actionResponse.id}/${'123'}`);\n// } else {\n//     alert('Something went wrong... sorry');\n// }\n});// let userCredintals = allUsers.find((user) => {\n//     return user.userName === userName && user.password === password\n// });\n// if (userCredintals === undefined) {\n//     console.log('Incorrect Username or Password');\n// } else {\n//     setUserLoggedInSuccessfully(true);\n//     setUserId(userCredintals.id);\n//     history.push(`/account/${userCredintals.id}/${'123'}`);\n//     if (userCredintals.id === '3') {\n//         console.log('yousef', userCredintals.id, typeof userCredintals.id);\n//         updateHeader(2)\n//     } else {\n//         updateHeader(1)\n//     }\n// }\n//setUser(currentUser);\n}};var validateEmail=function validateEmail(email){var re=/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;return re.test(String(email).toLowerCase());};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"E-mail\",id:\"email\",name:\"email\",onChange:function onChange(e){setUserEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"********\",id:\"password\",name:\"password\",onChange:function onChange(e){setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"input-field\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"\",id:\"remember\"}),\"Remember me\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"action\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:\"forgot your password?\"}),/*#__PURE__*/_jsx(\"button\",{id:\"btn\",className:\"btn\",onClick:function onClick(){onLoginClick();},children:\"Sign in\"})]})]})});};export default Login;","map":{"version":3,"sources":["/Users/yousefgadban/Documents/bootcamp/bank/src/Login/Login.js"],"names":["React","useState","useEffect","useHistory","GetAllUsers","LoginUser","Login","updateHeader","history","userId","setUserId","userEmail","setUserEmail","password","setPassword","allUsers","setAllUsers","userLoggedInSuccessfully","setUserLoggedInSuccessfully","currentUser","createdAt","name","avatar","userName","accountNumber","id","user","setUser","console","log","push","then","response","data","onLoginClick","validateEmail","trim","length","actionResponse","result","_id","role","email","re","test","String","toLowerCase","e","target","value"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport \"./login.css\";\nimport {  useHistory  } from 'react-router-dom';\nimport { GetAllUsers, LoginUser } from '../api/api'\n\n const Login = ({updateHeader})=> {\n\n    const history = useHistory();\n    const [userId, setUserId] = useState('');\n    const [userEmail, setUserEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [allUsers, setAllUsers] = useState([]);\n    const [userLoggedInSuccessfully, setUserLoggedInSuccessfully] = useState(false);\n\n    const currentUser = {\n        createdAt: \"2021-10-26T13:00:30.538Z\",\n        name: \"Kyle Gleason\",\n        avatar: \"https://cdn.fakercloud.com/avatars/mirfanqureshi_128.jpg\",\n        userName: \"kyle\",\n        password: \"kyle\",\n        accountNumber: 74732,\n        id: \"1\"\n    }\n\n    const [user, setUser] = useState({});\n\n    useEffect(()=>{\n        // get user data from db\n        console.log('did mount ', userLoggedInSuccessfully);\n        if (userLoggedInSuccessfully) {\n            history.push(`/account/${userId}/${'123'}`);\n        } else {\n            GetAllUsers().then((response)=>{\n                let allUsers = response.data;\n                console.log(allUsers);\n                setAllUsers(allUsers);\n            });\n        }\n        \n    }, [])\n\n\n    const onLoginClick = () => {\n        console.log('onLoginClick ', userEmail, password);\n\n        if (!validateEmail(userEmail) || password.trim().length < 6) {\n            console.log('Invalid input');\n        } else {\n            console.log('start loginn');\n\n\n            LoginUser(userEmail, password).then((response)=>{\n                let actionResponse = response.data;\n                console.log(actionResponse);\n\n                if (actionResponse.result === 'success') {\n                    setUserLoggedInSuccessfully(true);\n\n                    setUserId(actionResponse.data._id);\n                    history.push(`/account/${actionResponse.data._id}/${'123'}`);\n                    \n                    if (actionResponse.data.role === 'manager') {\n                        updateHeader(2)\n                    } else {\n                        updateHeader(1)\n                    }\n                } else {\n                    console.log('Incorrect Username or Password');\n                }\n\n                // if (response.status === 201) {\n                //     updateHeader(1)\n                //     history.push(`/account/${actionResponse.id}/${'123'}`);\n                // } else {\n                //     alert('Something went wrong... sorry');\n                // }\n            });\n\n            // let userCredintals = allUsers.find((user) => {\n            //     return user.userName === userName && user.password === password\n            // });\n\n            // if (userCredintals === undefined) {\n            //     console.log('Incorrect Username or Password');\n            // } else {\n            //     setUserLoggedInSuccessfully(true);\n            //     setUserId(userCredintals.id);\n            //     history.push(`/account/${userCredintals.id}/${'123'}`);\n                \n            //     if (userCredintals.id === '3') {\n            //         console.log('yousef', userCredintals.id, typeof userCredintals.id);\n            //         updateHeader(2)\n            //     } else {\n            //         updateHeader(1)\n            //     }\n               \n            // }\n\n           \n            //setUser(currentUser);\n        }\n\n    }\n\n    const validateEmail = (email) => {\n        const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.test(String(email).toLowerCase());\n    }\n\n\n    return(\n    <div className=\"container\">\n        <div className=\"form\">\n         <div className=\"input-field\">\n              <label >Email</label>\n              <input \n                type=\"text\" \n                placeholder=\"E-mail\" \n                id=\"email\" \n                name=\"email\"\n                onChange={(e) => {setUserEmail(e.target.value)}}/>\n        </div>\n        <div className=\"input-field\">\n           <label >Password</label>\n           <input \n                type=\"password\" \n                placeholder=\"********\" \n                id=\"password\" \n                name=\"password\"\n                onChange={(e) => {setPassword(e.target.value)}}/>\n       </div>\n       <div className=\"input-field\">\n            <label >\n                 <input type=\"checkbox\" name=\"\" id=\"remember\"/>Remember me\n           </label>\n       </div>\n       <div className=\"action\">\n             <a href=\"#\">forgot your password?</a>\n             <button id=\"btn\" className=\"btn\" onClick={()=> {onLoginClick()}}>Sign in</button>\n           </div>\n         </div>\n        </div>\n    )\n}\nexport default Login ;"]},"metadata":{},"sourceType":"module"}